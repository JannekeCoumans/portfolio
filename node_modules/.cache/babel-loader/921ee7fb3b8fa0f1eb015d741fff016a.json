{"ast":null,"code":"import _delay from \"lodash/delay\";\nimport _defaults from \"lodash/defaults\";\nimport _isFunction from \"lodash/isFunction\";\nimport _throttle from \"lodash/throttle\";\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n/*eslint no-magic-numbers: [\"error\", { \"ignore\": [-1, 0, 1, 2, 1000] }]*/\n\n\nimport { Children } from \"react\";\nimport { Selection, Collection, Wrapper } from \"victory-core\";\nvar RawZoomHelpers = {\n  checkDomainEquality: function (a, b) {\n    var checkDimension = function (dim) {\n      var val1 = a && a[dim];\n      var val2 = b && b[dim];\n\n      if (!val1 && !val2) {\n        return true;\n      } else if (!val1 || !val2) {\n        return false;\n      }\n\n      return +val1[0] === +val2[0] && +val1[1] === +val2[1];\n    };\n\n    return checkDimension(\"x\") && checkDimension(\"y\");\n  },\n\n  /**\n   * Generates a new domain scaled by factor and constrained by the original domain.\n   * @param  {[Number, Number]} currentDomain  The domain to be scaled.\n   * @param  {Object} evt the event object\n   * @param  {Object} props the props of the targeted component\n   * @param  {String} axis the desired dimension (either x or y)\n   * @return {[Number, Number]}                The scale domain\n   */\n  // eslint-disable-next-line max-params\n  scale: function (currentDomain, evt, props, axis) {\n    var _currentDomain = _slicedToArray(currentDomain, 2),\n        from = _currentDomain[0],\n        to = _currentDomain[1];\n\n    var range = Math.abs(to - from);\n    var minimumZoom = props.minimumZoom && props.minimumZoom[axis];\n    var factor = this.getScaleFactor(evt);\n\n    if (minimumZoom && range <= minimumZoom && factor < 1) {\n      return currentDomain;\n    }\n\n    var _getDomain$axis = _slicedToArray(this.getDomain(props)[axis], 2),\n        fromBound = _getDomain$axis[0],\n        toBound = _getDomain$axis[1];\n\n    var percent = this.getScalePercent(evt, props, axis);\n    var point = factor * from + percent * (factor * range);\n    var minDomain = this.getMinimumDomain(point, props, axis);\n\n    var _getScaledDomain = this.getScaledDomain(currentDomain, factor, percent),\n        _getScaledDomain2 = _slicedToArray(_getScaledDomain, 2),\n        newMin = _getScaledDomain2[0],\n        newMax = _getScaledDomain2[1];\n\n    var newDomain = [newMin > fromBound && newMin < toBound ? newMin : fromBound, newMax < toBound && newMax > fromBound ? newMax : toBound];\n    var domain = Math.abs(minDomain[1] - minDomain[0]) > Math.abs(newDomain[1] - newDomain[0]) ? minDomain : newDomain;\n    return Collection.containsDates([fromBound, toBound]) ? [new Date(domain[0]), new Date(domain[1])] : domain;\n  },\n  getScaledDomain: function (currentDomain, factor, percent) {\n    var _currentDomain2 = _slicedToArray(currentDomain, 2),\n        from = _currentDomain2[0],\n        to = _currentDomain2[1];\n\n    var range = Math.abs(to - from);\n    var diff = range - range * factor;\n    var newMin = +from + diff * percent;\n    var newMax = +to - diff * (1 - percent);\n    return [Math.min(newMin, newMax), Math.max(newMin, newMax)];\n  },\n  getMinimumDomain: function (point, props, axis) {\n    var minimumZoom = props.minimumZoom;\n    var originalDomain = this.getDomain(props)[axis];\n\n    var _originalDomain = _slicedToArray(originalDomain, 2),\n        from = _originalDomain[0],\n        to = _originalDomain[1];\n\n    var defaultMin = Math.abs(from - to) / 1000;\n    var extent = minimumZoom ? minimumZoom[axis] || defaultMin : defaultMin;\n    var minExtent = point - extent / 2;\n    var maxExtent = point + extent / 2;\n    return [minExtent > from && minExtent < to ? minExtent : from, maxExtent < to && maxExtent > from ? maxExtent : +from + extent / 2];\n  },\n  zoommingOut: function (evt) {\n    return evt.deltaY > 0;\n  },\n  getScaleFactor: function (evt) {\n    var sign = this.zoommingOut(evt) ? 1 : -1; // eslint-disable-next-line no-magic-numbers\n\n    var delta = Math.min(Math.abs(evt.deltaY / 300), 0.5); // TODO: Check scale factor\n\n    return Math.abs(1 + sign * delta);\n  },\n  getScalePercent: function (evt, props, axis) {\n    var originalDomain = this.getDomain(props);\n\n    var _originalDomain$axis = _slicedToArray(originalDomain[axis], 2),\n        from = _originalDomain$axis[0],\n        to = _originalDomain$axis[1];\n\n    var position = this.getPosition(evt, props, originalDomain);\n    return (position[axis] - from) / Math.abs(to - from);\n  },\n  getPosition: function (evt, props, originalDomain) {\n    var _Selection$getSVGEven = Selection.getSVGEventCoordinates(evt),\n        x = _Selection$getSVGEven.x,\n        y = _Selection$getSVGEven.y;\n\n    var originalScale = {\n      x: props.scale.x.domain(originalDomain.x),\n      y: props.scale.y.domain(originalDomain.y)\n    };\n    return Selection.getDataCoordinates(props, originalScale, x, y);\n  },\n\n  /**\n   * Generate a new domain translated by the delta and constrained by the original domain.\n   * @param  {[Number, Number]} currentDomain  The domain to be translated.\n   * @param  {[Number, Number]} originalDomain The original domain for the data set.\n   * @param  {Number}           delta          The delta to translate by\n   * @return {[Number, Number]}                The translated domain\n   */\n  pan: function (currentDomain, originalDomain, delta) {\n    var _currentDomain$map = currentDomain.map(function (val) {\n      return +val;\n    }),\n        _currentDomain$map2 = _slicedToArray(_currentDomain$map, 2),\n        fromCurrent = _currentDomain$map2[0],\n        toCurrent = _currentDomain$map2[1];\n\n    var _originalDomain$map = originalDomain.map(function (val) {\n      return +val;\n    }),\n        _originalDomain$map2 = _slicedToArray(_originalDomain$map, 2),\n        fromOriginal = _originalDomain$map2[0],\n        toOriginal = _originalDomain$map2[1];\n\n    var lowerBound = fromCurrent + delta;\n    var upperBound = toCurrent + delta;\n    var newDomain;\n\n    if (lowerBound > fromOriginal && upperBound < toOriginal) {\n      newDomain = [lowerBound, upperBound];\n    } else if (lowerBound < fromOriginal) {\n      // Clamp to lower limit\n      var dx = toCurrent - fromCurrent;\n      newDomain = [fromOriginal, fromOriginal + dx];\n    } else if (upperBound > toOriginal) {\n      // Clamp to upper limit\n      var _dx = toCurrent - fromCurrent;\n\n      newDomain = [toOriginal - _dx, toOriginal];\n    } else {\n      newDomain = currentDomain;\n    }\n\n    return Collection.containsDates(currentDomain) || Collection.containsDates(originalDomain) ? newDomain.map(function (val) {\n      return new Date(val);\n    }) : newDomain;\n  },\n  getDomainScale: function (domain, scale, axis) {\n    var axisDomain = Array.isArray(domain) ? domain : domain[axis];\n\n    var _axisDomain = _slicedToArray(axisDomain, 2),\n        from = _axisDomain[0],\n        to = _axisDomain[1];\n\n    var range = scale[axis].range();\n    var plottableWidth = Math.abs(range[0] - range[1]);\n    return plottableWidth / (to - from);\n  },\n  handleAnimation: function (ctx) {\n    var animationTimer = ctx.context.animationTimer;\n    var transitionTimer = ctx.context.transitionTimer;\n    transitionTimer.bypassAnimation();\n    animationTimer.bypassAnimation();\n\n    var resumeAnimation = function () {\n      animationTimer.resumeAnimation();\n      transitionTimer.resumeAnimation();\n    }; // delay the callback that resumes animation by ~1 frame so that animation does not interfere with wheel events\n\n\n    return _delay(resumeAnimation, 16); // eslint-disable-line no-magic-numbers\n  },\n  getLastDomain: function (targetProps, originalDomain) {\n    var zoomDomain = targetProps.zoomDomain,\n        cachedZoomDomain = targetProps.cachedZoomDomain,\n        currentDomain = targetProps.currentDomain,\n        domain = targetProps.domain;\n\n    if (zoomDomain && !this.checkDomainEquality(zoomDomain, cachedZoomDomain)) {\n      return _defaults({}, zoomDomain, domain);\n    }\n\n    return _defaults({}, currentDomain || zoomDomain || originalDomain, domain);\n  },\n  getDomain: function (props) {\n    var originalDomain = props.originalDomain,\n        domain = props.domain,\n        children = props.children,\n        zoomDimension = props.zoomDimension;\n    var childComponents = Children.toArray(children);\n    var childrenDomain = {};\n\n    if (childComponents.length) {\n      childrenDomain = zoomDimension ? _defineProperty({}, zoomDimension, Wrapper.getDomainFromChildren(props, zoomDimension, childComponents)) : {\n        x: Wrapper.getDomainFromChildren(props, \"x\", childComponents),\n        y: Wrapper.getDomainFromChildren(props, \"y\", childComponents)\n      };\n    }\n\n    return _defaults({}, childrenDomain, originalDomain, domain);\n  },\n  onMouseDown: function (evt, targetProps) {\n    evt.preventDefault();\n\n    if (!targetProps.allowPan) {\n      return undefined;\n    }\n\n    var parentSVG = targetProps.parentSVG || Selection.getParentSVG(evt);\n\n    var _Selection$getSVGEven2 = Selection.getSVGEventCoordinates(evt, parentSVG),\n        x = _Selection$getSVGEven2.x,\n        y = _Selection$getSVGEven2.y;\n\n    return [{\n      target: \"parent\",\n      mutation: function () {\n        return {\n          startX: x,\n          startY: y,\n          panning: true,\n          parentSVG: parentSVG,\n          parentControlledProps: [\"domain\"]\n        };\n      }\n    }];\n  },\n  onMouseUp: function (evt, targetProps) {\n    if (!targetProps.allowPan) {\n      return undefined;\n    }\n\n    return [{\n      target: \"parent\",\n      mutation: function () {\n        return {\n          panning: false\n        };\n      }\n    }];\n  },\n  onMouseLeave: function (evt, targetProps) {\n    if (!targetProps.allowPan) {\n      return undefined;\n    }\n\n    return [{\n      target: \"parent\",\n      mutation: function () {\n        return {\n          panning: false\n        };\n      }\n    }];\n  },\n  // eslint-disable-next-line max-params, max-statements\n  onMouseMove: function (evt, targetProps, eventKey, ctx) {\n    if (targetProps.panning && targetProps.allowPan) {\n      var scale = targetProps.scale,\n          startX = targetProps.startX,\n          startY = targetProps.startY,\n          onZoomDomainChange = targetProps.onZoomDomainChange,\n          zoomDomain = targetProps.zoomDomain,\n          zoomDimension = targetProps.zoomDimension,\n          horizontal = targetProps.horizontal;\n      var parentSVG = targetProps.parentSVG || Selection.getParentSVG(evt);\n\n      var _Selection$getSVGEven3 = Selection.getSVGEventCoordinates(evt, parentSVG),\n          x = _Selection$getSVGEven3.x,\n          y = _Selection$getSVGEven3.y;\n\n      var originalDomain = this.getDomain(targetProps);\n      var lastDomain = this.getLastDomain(targetProps, originalDomain);\n      var deltaX = horizontal ? y - startY : startX - x;\n      var deltaY = horizontal ? startX - x : y - startY;\n      var dx = deltaX / this.getDomainScale(lastDomain, scale, \"x\");\n      var dy = deltaY / this.getDomainScale(lastDomain, scale, \"y\");\n      var currentDomain = {\n        x: zoomDimension === \"y\" ? originalDomain.x : this.pan(lastDomain.x, originalDomain.x, dx),\n        y: zoomDimension === \"x\" ? originalDomain.y : this.pan(lastDomain.y, originalDomain.y, dy)\n      };\n      var resumeAnimation = this.handleAnimation(ctx);\n      var zoomActive = !this.checkDomainEquality(originalDomain, lastDomain);\n      var mutatedProps = {\n        parentControlledProps: [\"domain\"],\n        startX: x,\n        startY: y,\n        parentSVG: parentSVG,\n        currentDomain: currentDomain,\n        originalDomain: originalDomain,\n        cachedZoomDomain: zoomDomain,\n        zoomActive: zoomActive\n      };\n\n      if (_isFunction(onZoomDomainChange)) {\n        onZoomDomainChange(currentDomain, _defaults({}, mutatedProps, targetProps));\n      }\n\n      return [{\n        target: \"parent\",\n        callback: resumeAnimation,\n        mutation: function () {\n          return mutatedProps;\n        }\n      }];\n    }\n\n    return undefined;\n  },\n  // eslint-disable-next-line max-params\n  onWheel: function (evt, targetProps, eventKey, ctx) {\n    if (!targetProps.allowZoom) {\n      return undefined;\n    }\n\n    var onZoomDomainChange = targetProps.onZoomDomainChange,\n        zoomDimension = targetProps.zoomDimension,\n        zoomDomain = targetProps.zoomDomain;\n    var originalDomain = this.getDomain(targetProps);\n    var lastDomain = this.getLastDomain(targetProps, originalDomain);\n    var x = lastDomain.x,\n        y = lastDomain.y;\n    var currentDomain = {\n      x: zoomDimension === \"y\" ? lastDomain.x : this.scale(x, evt, targetProps, \"x\"),\n      y: zoomDimension === \"x\" ? lastDomain.y : this.scale(y, evt, targetProps, \"y\")\n    };\n    var resumeAnimation = this.handleAnimation(ctx);\n    var zoomActive = !this.zoommingOut(evt) || // if zoomming in or\n    //   if zoomActive is already set AND user hasn't zoommed out all the way\n    targetProps.zoomActive && !this.checkDomainEquality(originalDomain, lastDomain);\n    var mutatedProps = {\n      currentDomain: currentDomain,\n      originalDomain: originalDomain,\n      cachedZoomDomain: zoomDomain,\n      parentControlledProps: [\"domain\"],\n      panning: false,\n      zoomActive: zoomActive\n    };\n\n    if (_isFunction(onZoomDomainChange)) {\n      onZoomDomainChange(currentDomain, _defaults({}, mutatedProps, targetProps));\n    }\n\n    return [{\n      target: \"parent\",\n      callback: resumeAnimation,\n      mutation: function () {\n        return mutatedProps;\n      }\n    }];\n  }\n};\nexport { RawZoomHelpers }; // allow victory-native to extend these helpers\n\nexport default {\n  checkDomainEquality: RawZoomHelpers.checkDomainEquality.bind(RawZoomHelpers),\n  onMouseDown: RawZoomHelpers.onMouseDown.bind(RawZoomHelpers),\n  onMouseUp: RawZoomHelpers.onMouseUp.bind(RawZoomHelpers),\n  onMouseLeave: RawZoomHelpers.onMouseLeave.bind(RawZoomHelpers),\n  onMouseMove: _throttle(RawZoomHelpers.onMouseMove.bind(RawZoomHelpers), 16, // eslint-disable-line no-magic-numbers\n  {\n    leading: true,\n    trailing: false\n  }),\n  onWheel: _throttle(RawZoomHelpers.onWheel.bind(RawZoomHelpers), 16, // eslint-disable-line no-magic-numbers\n  {\n    leading: true,\n    trailing: false\n  })\n};","map":{"version":3,"sources":["C:/Users/31622/Documents/React Apps/portfolio/node_modules/victory-zoom-container/es/zoom-helpers.js"],"names":["_delay","_defaults","_isFunction","_throttle","_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","_slicedToArray","arr","i","_arrayWithHoles","_iterableToArrayLimit","_nonIterableRest","TypeError","_arr","_n","_d","_e","undefined","_i","Symbol","iterator","_s","next","done","push","length","err","Array","isArray","Children","Selection","Collection","Wrapper","RawZoomHelpers","checkDomainEquality","a","b","checkDimension","dim","val1","val2","scale","currentDomain","evt","props","axis","_currentDomain","from","to","range","Math","abs","minimumZoom","factor","getScaleFactor","_getDomain$axis","getDomain","fromBound","toBound","percent","getScalePercent","point","minDomain","getMinimumDomain","_getScaledDomain","getScaledDomain","_getScaledDomain2","newMin","newMax","newDomain","domain","containsDates","Date","_currentDomain2","diff","min","max","originalDomain","_originalDomain","defaultMin","extent","minExtent","maxExtent","zoommingOut","deltaY","sign","delta","_originalDomain$axis","position","getPosition","_Selection$getSVGEven","getSVGEventCoordinates","x","y","originalScale","getDataCoordinates","pan","_currentDomain$map","map","val","_currentDomain$map2","fromCurrent","toCurrent","_originalDomain$map","_originalDomain$map2","fromOriginal","toOriginal","lowerBound","upperBound","dx","_dx","getDomainScale","axisDomain","_axisDomain","plottableWidth","handleAnimation","ctx","animationTimer","context","transitionTimer","bypassAnimation","resumeAnimation","getLastDomain","targetProps","zoomDomain","cachedZoomDomain","children","zoomDimension","childComponents","toArray","childrenDomain","getDomainFromChildren","onMouseDown","preventDefault","allowPan","parentSVG","getParentSVG","_Selection$getSVGEven2","target","mutation","startX","startY","panning","parentControlledProps","onMouseUp","onMouseLeave","onMouseMove","eventKey","onZoomDomainChange","horizontal","_Selection$getSVGEven3","lastDomain","deltaX","dy","zoomActive","mutatedProps","callback","onWheel","allowZoom","bind","leading","trailing"],"mappings":"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","sourcesContent":["import _delay from \"lodash/delay\";\nimport _defaults from \"lodash/defaults\";\nimport _isFunction from \"lodash/isFunction\";\nimport _throttle from \"lodash/throttle\";\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\n/*eslint no-magic-numbers: [\"error\", { \"ignore\": [-1, 0, 1, 2, 1000] }]*/\nimport { Children } from \"react\";\nimport { Selection, Collection, Wrapper } from \"victory-core\";\nvar RawZoomHelpers = {\n  checkDomainEquality: function (a, b) {\n    var checkDimension = function (dim) {\n      var val1 = a && a[dim];\n      var val2 = b && b[dim];\n\n      if (!val1 && !val2) {\n        return true;\n      } else if (!val1 || !val2) {\n        return false;\n      }\n\n      return +val1[0] === +val2[0] && +val1[1] === +val2[1];\n    };\n\n    return checkDimension(\"x\") && checkDimension(\"y\");\n  },\n\n  /**\n   * Generates a new domain scaled by factor and constrained by the original domain.\n   * @param  {[Number, Number]} currentDomain  The domain to be scaled.\n   * @param  {Object} evt the event object\n   * @param  {Object} props the props of the targeted component\n   * @param  {String} axis the desired dimension (either x or y)\n   * @return {[Number, Number]}                The scale domain\n   */\n  // eslint-disable-next-line max-params\n  scale: function (currentDomain, evt, props, axis) {\n    var _currentDomain = _slicedToArray(currentDomain, 2),\n        from = _currentDomain[0],\n        to = _currentDomain[1];\n\n    var range = Math.abs(to - from);\n    var minimumZoom = props.minimumZoom && props.minimumZoom[axis];\n    var factor = this.getScaleFactor(evt);\n\n    if (minimumZoom && range <= minimumZoom && factor < 1) {\n      return currentDomain;\n    }\n\n    var _getDomain$axis = _slicedToArray(this.getDomain(props)[axis], 2),\n        fromBound = _getDomain$axis[0],\n        toBound = _getDomain$axis[1];\n\n    var percent = this.getScalePercent(evt, props, axis);\n    var point = factor * from + percent * (factor * range);\n    var minDomain = this.getMinimumDomain(point, props, axis);\n\n    var _getScaledDomain = this.getScaledDomain(currentDomain, factor, percent),\n        _getScaledDomain2 = _slicedToArray(_getScaledDomain, 2),\n        newMin = _getScaledDomain2[0],\n        newMax = _getScaledDomain2[1];\n\n    var newDomain = [newMin > fromBound && newMin < toBound ? newMin : fromBound, newMax < toBound && newMax > fromBound ? newMax : toBound];\n    var domain = Math.abs(minDomain[1] - minDomain[0]) > Math.abs(newDomain[1] - newDomain[0]) ? minDomain : newDomain;\n    return Collection.containsDates([fromBound, toBound]) ? [new Date(domain[0]), new Date(domain[1])] : domain;\n  },\n  getScaledDomain: function (currentDomain, factor, percent) {\n    var _currentDomain2 = _slicedToArray(currentDomain, 2),\n        from = _currentDomain2[0],\n        to = _currentDomain2[1];\n\n    var range = Math.abs(to - from);\n    var diff = range - range * factor;\n    var newMin = +from + diff * percent;\n    var newMax = +to - diff * (1 - percent);\n    return [Math.min(newMin, newMax), Math.max(newMin, newMax)];\n  },\n  getMinimumDomain: function (point, props, axis) {\n    var minimumZoom = props.minimumZoom;\n    var originalDomain = this.getDomain(props)[axis];\n\n    var _originalDomain = _slicedToArray(originalDomain, 2),\n        from = _originalDomain[0],\n        to = _originalDomain[1];\n\n    var defaultMin = Math.abs(from - to) / 1000;\n    var extent = minimumZoom ? minimumZoom[axis] || defaultMin : defaultMin;\n    var minExtent = point - extent / 2;\n    var maxExtent = point + extent / 2;\n    return [minExtent > from && minExtent < to ? minExtent : from, maxExtent < to && maxExtent > from ? maxExtent : +from + extent / 2];\n  },\n  zoommingOut: function (evt) {\n    return evt.deltaY > 0;\n  },\n  getScaleFactor: function (evt) {\n    var sign = this.zoommingOut(evt) ? 1 : -1; // eslint-disable-next-line no-magic-numbers\n\n    var delta = Math.min(Math.abs(evt.deltaY / 300), 0.5); // TODO: Check scale factor\n\n    return Math.abs(1 + sign * delta);\n  },\n  getScalePercent: function (evt, props, axis) {\n    var originalDomain = this.getDomain(props);\n\n    var _originalDomain$axis = _slicedToArray(originalDomain[axis], 2),\n        from = _originalDomain$axis[0],\n        to = _originalDomain$axis[1];\n\n    var position = this.getPosition(evt, props, originalDomain);\n    return (position[axis] - from) / Math.abs(to - from);\n  },\n  getPosition: function (evt, props, originalDomain) {\n    var _Selection$getSVGEven = Selection.getSVGEventCoordinates(evt),\n        x = _Selection$getSVGEven.x,\n        y = _Selection$getSVGEven.y;\n\n    var originalScale = {\n      x: props.scale.x.domain(originalDomain.x),\n      y: props.scale.y.domain(originalDomain.y)\n    };\n    return Selection.getDataCoordinates(props, originalScale, x, y);\n  },\n\n  /**\n   * Generate a new domain translated by the delta and constrained by the original domain.\n   * @param  {[Number, Number]} currentDomain  The domain to be translated.\n   * @param  {[Number, Number]} originalDomain The original domain for the data set.\n   * @param  {Number}           delta          The delta to translate by\n   * @return {[Number, Number]}                The translated domain\n   */\n  pan: function (currentDomain, originalDomain, delta) {\n    var _currentDomain$map = currentDomain.map(function (val) {\n      return +val;\n    }),\n        _currentDomain$map2 = _slicedToArray(_currentDomain$map, 2),\n        fromCurrent = _currentDomain$map2[0],\n        toCurrent = _currentDomain$map2[1];\n\n    var _originalDomain$map = originalDomain.map(function (val) {\n      return +val;\n    }),\n        _originalDomain$map2 = _slicedToArray(_originalDomain$map, 2),\n        fromOriginal = _originalDomain$map2[0],\n        toOriginal = _originalDomain$map2[1];\n\n    var lowerBound = fromCurrent + delta;\n    var upperBound = toCurrent + delta;\n    var newDomain;\n\n    if (lowerBound > fromOriginal && upperBound < toOriginal) {\n      newDomain = [lowerBound, upperBound];\n    } else if (lowerBound < fromOriginal) {\n      // Clamp to lower limit\n      var dx = toCurrent - fromCurrent;\n      newDomain = [fromOriginal, fromOriginal + dx];\n    } else if (upperBound > toOriginal) {\n      // Clamp to upper limit\n      var _dx = toCurrent - fromCurrent;\n\n      newDomain = [toOriginal - _dx, toOriginal];\n    } else {\n      newDomain = currentDomain;\n    }\n\n    return Collection.containsDates(currentDomain) || Collection.containsDates(originalDomain) ? newDomain.map(function (val) {\n      return new Date(val);\n    }) : newDomain;\n  },\n  getDomainScale: function (domain, scale, axis) {\n    var axisDomain = Array.isArray(domain) ? domain : domain[axis];\n\n    var _axisDomain = _slicedToArray(axisDomain, 2),\n        from = _axisDomain[0],\n        to = _axisDomain[1];\n\n    var range = scale[axis].range();\n    var plottableWidth = Math.abs(range[0] - range[1]);\n    return plottableWidth / (to - from);\n  },\n  handleAnimation: function (ctx) {\n    var animationTimer = ctx.context.animationTimer;\n    var transitionTimer = ctx.context.transitionTimer;\n    transitionTimer.bypassAnimation();\n    animationTimer.bypassAnimation();\n\n    var resumeAnimation = function () {\n      animationTimer.resumeAnimation();\n      transitionTimer.resumeAnimation();\n    }; // delay the callback that resumes animation by ~1 frame so that animation does not interfere with wheel events\n\n\n    return _delay(resumeAnimation, 16); // eslint-disable-line no-magic-numbers\n  },\n  getLastDomain: function (targetProps, originalDomain) {\n    var zoomDomain = targetProps.zoomDomain,\n        cachedZoomDomain = targetProps.cachedZoomDomain,\n        currentDomain = targetProps.currentDomain,\n        domain = targetProps.domain;\n\n    if (zoomDomain && !this.checkDomainEquality(zoomDomain, cachedZoomDomain)) {\n      return _defaults({}, zoomDomain, domain);\n    }\n\n    return _defaults({}, currentDomain || zoomDomain || originalDomain, domain);\n  },\n  getDomain: function (props) {\n    var originalDomain = props.originalDomain,\n        domain = props.domain,\n        children = props.children,\n        zoomDimension = props.zoomDimension;\n    var childComponents = Children.toArray(children);\n    var childrenDomain = {};\n\n    if (childComponents.length) {\n      childrenDomain = zoomDimension ? _defineProperty({}, zoomDimension, Wrapper.getDomainFromChildren(props, zoomDimension, childComponents)) : {\n        x: Wrapper.getDomainFromChildren(props, \"x\", childComponents),\n        y: Wrapper.getDomainFromChildren(props, \"y\", childComponents)\n      };\n    }\n\n    return _defaults({}, childrenDomain, originalDomain, domain);\n  },\n  onMouseDown: function (evt, targetProps) {\n    evt.preventDefault();\n\n    if (!targetProps.allowPan) {\n      return undefined;\n    }\n\n    var parentSVG = targetProps.parentSVG || Selection.getParentSVG(evt);\n\n    var _Selection$getSVGEven2 = Selection.getSVGEventCoordinates(evt, parentSVG),\n        x = _Selection$getSVGEven2.x,\n        y = _Selection$getSVGEven2.y;\n\n    return [{\n      target: \"parent\",\n      mutation: function () {\n        return {\n          startX: x,\n          startY: y,\n          panning: true,\n          parentSVG: parentSVG,\n          parentControlledProps: [\"domain\"]\n        };\n      }\n    }];\n  },\n  onMouseUp: function (evt, targetProps) {\n    if (!targetProps.allowPan) {\n      return undefined;\n    }\n\n    return [{\n      target: \"parent\",\n      mutation: function () {\n        return {\n          panning: false\n        };\n      }\n    }];\n  },\n  onMouseLeave: function (evt, targetProps) {\n    if (!targetProps.allowPan) {\n      return undefined;\n    }\n\n    return [{\n      target: \"parent\",\n      mutation: function () {\n        return {\n          panning: false\n        };\n      }\n    }];\n  },\n  // eslint-disable-next-line max-params, max-statements\n  onMouseMove: function (evt, targetProps, eventKey, ctx) {\n    if (targetProps.panning && targetProps.allowPan) {\n      var scale = targetProps.scale,\n          startX = targetProps.startX,\n          startY = targetProps.startY,\n          onZoomDomainChange = targetProps.onZoomDomainChange,\n          zoomDomain = targetProps.zoomDomain,\n          zoomDimension = targetProps.zoomDimension,\n          horizontal = targetProps.horizontal;\n      var parentSVG = targetProps.parentSVG || Selection.getParentSVG(evt);\n\n      var _Selection$getSVGEven3 = Selection.getSVGEventCoordinates(evt, parentSVG),\n          x = _Selection$getSVGEven3.x,\n          y = _Selection$getSVGEven3.y;\n\n      var originalDomain = this.getDomain(targetProps);\n      var lastDomain = this.getLastDomain(targetProps, originalDomain);\n      var deltaX = horizontal ? y - startY : startX - x;\n      var deltaY = horizontal ? startX - x : y - startY;\n      var dx = deltaX / this.getDomainScale(lastDomain, scale, \"x\");\n      var dy = deltaY / this.getDomainScale(lastDomain, scale, \"y\");\n      var currentDomain = {\n        x: zoomDimension === \"y\" ? originalDomain.x : this.pan(lastDomain.x, originalDomain.x, dx),\n        y: zoomDimension === \"x\" ? originalDomain.y : this.pan(lastDomain.y, originalDomain.y, dy)\n      };\n      var resumeAnimation = this.handleAnimation(ctx);\n      var zoomActive = !this.checkDomainEquality(originalDomain, lastDomain);\n      var mutatedProps = {\n        parentControlledProps: [\"domain\"],\n        startX: x,\n        startY: y,\n        parentSVG: parentSVG,\n        currentDomain: currentDomain,\n        originalDomain: originalDomain,\n        cachedZoomDomain: zoomDomain,\n        zoomActive: zoomActive\n      };\n\n      if (_isFunction(onZoomDomainChange)) {\n        onZoomDomainChange(currentDomain, _defaults({}, mutatedProps, targetProps));\n      }\n\n      return [{\n        target: \"parent\",\n        callback: resumeAnimation,\n        mutation: function () {\n          return mutatedProps;\n        }\n      }];\n    }\n\n    return undefined;\n  },\n  // eslint-disable-next-line max-params\n  onWheel: function (evt, targetProps, eventKey, ctx) {\n    if (!targetProps.allowZoom) {\n      return undefined;\n    }\n\n    var onZoomDomainChange = targetProps.onZoomDomainChange,\n        zoomDimension = targetProps.zoomDimension,\n        zoomDomain = targetProps.zoomDomain;\n    var originalDomain = this.getDomain(targetProps);\n    var lastDomain = this.getLastDomain(targetProps, originalDomain);\n    var x = lastDomain.x,\n        y = lastDomain.y;\n    var currentDomain = {\n      x: zoomDimension === \"y\" ? lastDomain.x : this.scale(x, evt, targetProps, \"x\"),\n      y: zoomDimension === \"x\" ? lastDomain.y : this.scale(y, evt, targetProps, \"y\")\n    };\n    var resumeAnimation = this.handleAnimation(ctx);\n    var zoomActive = !this.zoommingOut(evt) || // if zoomming in or\n    //   if zoomActive is already set AND user hasn't zoommed out all the way\n    targetProps.zoomActive && !this.checkDomainEquality(originalDomain, lastDomain);\n    var mutatedProps = {\n      currentDomain: currentDomain,\n      originalDomain: originalDomain,\n      cachedZoomDomain: zoomDomain,\n      parentControlledProps: [\"domain\"],\n      panning: false,\n      zoomActive: zoomActive\n    };\n\n    if (_isFunction(onZoomDomainChange)) {\n      onZoomDomainChange(currentDomain, _defaults({}, mutatedProps, targetProps));\n    }\n\n    return [{\n      target: \"parent\",\n      callback: resumeAnimation,\n      mutation: function () {\n        return mutatedProps;\n      }\n    }];\n  }\n};\nexport { RawZoomHelpers }; // allow victory-native to extend these helpers\n\nexport default {\n  checkDomainEquality: RawZoomHelpers.checkDomainEquality.bind(RawZoomHelpers),\n  onMouseDown: RawZoomHelpers.onMouseDown.bind(RawZoomHelpers),\n  onMouseUp: RawZoomHelpers.onMouseUp.bind(RawZoomHelpers),\n  onMouseLeave: RawZoomHelpers.onMouseLeave.bind(RawZoomHelpers),\n  onMouseMove: _throttle(RawZoomHelpers.onMouseMove.bind(RawZoomHelpers), 16, // eslint-disable-line no-magic-numbers\n  {\n    leading: true,\n    trailing: false\n  }),\n  onWheel: _throttle(RawZoomHelpers.onWheel.bind(RawZoomHelpers), 16, // eslint-disable-line no-magic-numbers\n  {\n    leading: true,\n    trailing: false\n  })\n};"]},"metadata":{},"sourceType":"module"}